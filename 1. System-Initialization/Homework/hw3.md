# Домашнее задание к занятию "Инициализация системы, Init, systemd"

Любые вопросы по решению задач задавайте в чате учебной группы.

---

### Задание 1.

Выполните systemd-analyze blame.

*Укажите, какие модули загружаются дольше всего.*

---

### Задание 2.

Создайте свой systemd скрипт. В качестве примера можно воспользоваться [ссылкой](https://ph0en1x.net/92-iptables-firewall-script-ipv4-ipv6-with-autostart-linux-systemd.html)

Пример скрипта который будет сохранять правила. Его можно взять за основу. Пример из ссылки нужно будет немного переделать исходя из заданных файлов в bash скрипте.

```bash
#!/bin/bash
case "$1" in
    start)
        if [ -f /etc/sysconfig/iptables ]; then
            /sbin/iptables-restore < /etc/sysconfig/iptables
        fi
        ;;
    stop)
        /sbin/iptables-save > /etc/sysconfig/iptables
        ;;
    *)
        echo "Usage: $0 {start|stop}"
        exit 1
        ;;
esac
exit 0
```

---

### Задание 3.

Настройте systemd сервис так, чтобы он автоматически перезапускался при неожиданном завершении.

1. Создать простой сервис, который будет имитировать ошибку и завершаться через некоторое время. Можно использовать сервис в задании 1.
2. Настроить параметр Restart=on-failure в юнит-файле сервиса.
3. Проверить поведение сервиса при его завершении.

---

### Задание 4.

Запустите команду loginctl user-status.

*Что выполняет, для чего предназначена эта утилита? Предоставьте вывод команды*
